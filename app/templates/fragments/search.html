<!-- app/templates/fragments/search.html -->
<div class="container">
    <h2>–ü–æ–∏—Å–∫ –∞–Ω–∫–µ—Ç</h2>
    <form method="get" action="/search">
        <!-- Country Dropdown -->
        <label for="country">–°—Ç—Ä–∞–Ω–∞:
            <select id="country" name="country" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
                <!-- Country options will be loaded dynamically -->
            </select>
        </label>

        <!-- City Dropdown -->
        <label for="city">–ì–æ—Ä–æ–¥:
            <select id="city" name="city" required disabled>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                <!-- City options will be loaded dynamically based on country -->
            </select>
        </label>

        <!-- Gender Dropdown -->
        <label for="gender">–ü–æ–ª:
            <select name="gender">
                <option value="">–ù–µ –≤–∞–∂–Ω–æ</option>
                <option value="male">–ú—É–∂—Å–∫–æ–π</option>
                <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
            </select>
        </label>

        <!-- Age Range Dropdowns -->
        <label for="min_age">–í–æ–∑—Ä–∞—Å—Ç –æ—Ç:
            <select name="min_age">
                <option value="18" selected>18</option>
                <option value="20">20</option>
                <option value="25">25</option>
                <option value="30">30</option>
                <option value="35">35</option>
                <option value="40">40</option>
            </select>
        </label>

        <label for="max_age">–í–æ–∑—Ä–∞—Å—Ç –¥–æ:
            <select name="max_age">
                <option value="30" selected>30</option>
                <option value="35">35</option>
                <option value="40">40</option>
                <option value="45">45</option>
                <option value="50">50</option>
                <option value="60">60</option>
            </select>
        </label>

        <button type="submit">üîç –ù–∞–π—Ç–∏</button>
    </form>

    <div id="search-results">
        {% for profile in profiles %}
        <div class="card">
            <p><strong>{{ profile.name }}</strong> ({{ profile.age }})</p>
            <p>{{ profile.city }}</p>
            <p>{{ profile.about }}</p>
            {% if profile.photo %}
            <img src="/static/uploads/{{ profile.photo }}" class="preview-img" />
            {% endif %}
            <a href="/dialog/{{ profile.id }}" data-link>üí¨ –ù–∞–ø–∏—Å–∞—Ç—å</a>
        </div>
        {% endfor %}
    </div>
</div>

<script src="{{ url_for('static', filename='js/geo-loader.js') }}" defer></script>