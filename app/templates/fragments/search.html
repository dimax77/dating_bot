<!-- app/templates/fragments/search.html -->
<div class="container">
    <h2>–ü–æ–∏—Å–∫ –∞–Ω–∫–µ—Ç</h2>
    <form method="get" action="/search">
        <!-- Country Dropdown -->
        <label for="country">–°—Ç—Ä–∞–Ω–∞:
            <select id="country" name="country" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
                <!-- Country options will be loaded dynamically -->
            </select>
        </label>

        <!-- City Dropdown -->
        <label for="city">–ì–æ—Ä–æ–¥:
            <select id="city" name="city" required disabled>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                <!-- City options will be loaded dynamically based on country -->
            </select>
        </label>

        <!-- Gender Dropdown -->
        <label for="gender">–ü–æ–ª:
            <select name="gender">
                <option value="">–ù–µ –≤–∞–∂–Ω–æ</option>
                <option value="male">–ú—É–∂—Å–∫–æ–π</option>
                <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
            </select>
        </label>

        <!-- Age Range Dropdowns -->
        <label for="min_age">–í–æ–∑—Ä–∞—Å—Ç –æ—Ç:
            <select name="min_age">
                <option value="18" selected>18</option>
                <option value="20">19</option>
                <option value="20">20</option>
                <option value="20">21</option>
                <option value="20">22</option>
                <option value="20">23</option>
                <option value="20">24</option>
                <option value="20">25</option>
                <option value="20">26</option>
                <option value="20">27</option>
                <option value="20">28</option>
                <option value="20">29</option>
                <option value="25">30</option>
                <option value="30">31</option>
                <option value="35">32</option>
                <option value="35">33</option>
                <option value="35">34</option>
                <option value="35">35</option>
                <option value="35">36</option>
                <option value="35">37</option>
                <option value="35">38</option>
                <option value="35">39</option>
                <option value="35">40</option>
                <option value="40">41</option>
            </select>
        </label>

        <label for="max_age">–í–æ–∑—Ä–∞—Å—Ç –¥–æ:
            <select name="max_age">
                <option value="30" selected>30</option>
                <option value="35">31</option>
                <option value="35">32</option>
                <option value="35">33</option>
                <option value="35">34</option>
                <option value="35">35</option>
                <option value="35">36</option>
                <option value="35">37</option>
                <option value="35">38</option>
                <option value="35">39</option>
                <option value="35">40</option>
                <option value="40">41</option>
                <option value="45">42</option>
                <option value="50">43</option>
                <option value="60">44</option>
            </select>
        </label>

        <button type="submit">üîç –ù–∞–π—Ç–∏</button>
    </form>

    <div id="search-results">
        {% for profile in profiles %}
        <div class="card">
            <p><strong>{{ profile.name }}</strong> ({{ profile.age }})</p>
            <p>{{ profile.city }}</p>
            <p>{{ profile.about }}</p>
            {% if profile.photo %}
            <img src="/static/uploads/{{ profile.photo }}" class="preview-img" />
            {% endif %}
            <a href="/dialog/{{ profile.id }}" data-link>üí¨ –ù–∞–ø–∏—Å–∞—Ç—å</a>
        </div>
        {% endfor %}
    </div>
    <div class="profile-cards">
        {% for profile in profiles %}
        <div class="profile-card">
            <img src="{{ profile.photo_url }}" alt="–§–æ—Ç–æ {{ profile.name }}">
            <div class="profile-info">
                <h3>{{ profile.name }}, {{ profile.age }}</h3>
                <p>{{ profile.city }}, {{ profile.country }}</p>
                <p class="profile-about">{{ profile.about|truncate(100) }}</p>
            </div>
        </div>
        {% endfor %}
    </div>

</div>

<script src="{{ url_for('static', filename='js/geo-loader.js') }}" defer></script>