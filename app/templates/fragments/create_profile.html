<!-- app/templates/fragments/create_profile.html -->
<form method="POST" enctype="multipart/form-data">
    {{ form.hidden_tag() }}

    <div class="form-group">
        <label>{{ form.name.label }} {{ form.name() }}</label>
    </div>

    <div class="form-group">
        <label>{{ form.gender.label }} {{ form.gender() }}</label>
    </div>

    <div class="form-group">
        <label>{{ form.birthdate.label }} {{ form.birthdate() }}</label>
    </div>

    <div class="form-group">
        <label>Country {{ form.country(id='country') }}</label>
    </div>

    <div class="form-group">
        <label>City {{ form.city(id='city', disabled=True) }}</label>
    </div>

    <div class="form-group">
        <label>{{ form.interests.label }} {{ form.interests() }}</label>
    </div>

    <div class="form-group">
        <label>{{ form.about.label }} {{ form.about() }}</label>
    </div>

    <div class="form-group">
        <label>{{ form.photo.label }} {{ form.photo(id='photo') }}</label>
        <img id="photo-preview" class="preview-img" style="display:none;">
    </div>

    <button type="submit" class="submit-btn">Submit</button>
</form>
<script src="{{ url_for('static', filename='js/geo-loader.js') }}"></script>
<!-- 

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const countrySelect = document.getElementById('country');
        const citySelect = document.getElementById('city');
        const photoInput = document.getElementById('photo');
        const preview = document.getElementById('photo-preview');

        // 1. Get country list
        fetch('https://countriesnow.space/api/v0.1/countries/positions')
            .then(res => res.json())
            .then(data => {
                const countries = data.data;
                countries.sort((a, b) => a.name.localeCompare(b.name));
                countries.forEach(country => {
                    const option = document.createElement('option');
                    option.value = country.name;
                    option.textContent = country.name;
                    countrySelect.appendChild(option);
                });
            });

        // 2. Load cities when a country is selected
        countrySelect.addEventListener('change', () => {
            const selectedCountry = countrySelect.value;
            citySelect.innerHTML = '<option>Loading...</option>';

            fetch('https://countriesnow.space/api/v0.1/countries/cities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ country: selectedCountry })
            })
                .then(res => res.json())
                .then(data => {
                    citySelect.innerHTML = '';
                    data.data.forEach(city => {
                        const option = document.createElement('option');
                        option.value = city;
                        option.textContent = city;
                        citySelect.appendChild(option);
                    });
                })
                .catch(err => {
                    console.error('Error loading cities:', err);
                    citySelect.innerHTML = '<option>Error</option>';
                });
        });

        // 3. Photo preview
        photoInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (evt) => {
                    preview.src = evt.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });
    });
</script> -->